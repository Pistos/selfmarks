<h3>Account</h3>

<ul>
<li><a href="javascript:#{h(@bookmarklet_source)}">Selfmarks</a> Bookmarklet (drag to toolbar)</li>
<li><a href="ubiquity" target="selfmarks-ubiquity">Add Ubiquity Command</a> (Firefox)</li>
<li>#{A( 'Import Bookmarks', :href => R( MainController, :import ) )}</li>
<li>#{A( 'Export Bookmarks', :href => R( MainController, :export ) )}</li>
</ul>

<p class="for-opera">
In Opera, right click the search box to "Create Search".
Specify a keyword, then use that keyword any time in your address bar
to search Selfmarks.
(<a href="http://www.opera.com/support/kb/view/351/">How?</a>)
</p>

<form method="POST">

<table id="account">
  <tr>
    <td>Username:</td>
    <td><input type="text" name="_username" value="#{user.username}"/></td>
  </tr>
  <tr>
    <td>New password:</td>
    <td><input type="password" name="_password1"/></td>
  </tr>
  <tr>
    <td>Confirm new password:</td>
    <td><input type="password" name="_password2"/></td>
  </tr>
  <tr>
    <td>OpenID:</td>
    <td><input type="text" name="_openid" value="#{user.openid}" size="40"/></td>
  </tr>
  <tr>
    <td></td>
    <td><input type="submit" value="Update"/></td>
  </tr>
</table>

</form>

<h4>API</h4>

<p>
Your API key is: <b>#{user.api_key || '(not yet generated)'}</b>
</p>

<p>
Keep your API key safe and secure!  It is as good as your username and password
in authenticating with Selfmarks.  You may regenerate your API key at any time,
and the old key will be discarded (lost forever).  Regenerating your API key
will of course break any existing applications that rely on it; these would
have to be updated with the new key.
</p>

#{A( 'Generate API Key', :href => Rs( :generate_api_key ) )}